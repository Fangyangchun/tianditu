!function(e){var a={};function t(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)t.d(n,o,function(a){return e[a]}.bind(null,o));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="./",t(t.s=0)}([function(e,a){navigator.userAgent.toLowerCase().indexOf("dingtalk")>-1&&document.writeln('<script src="https://appx/web-view.min.js"><\/script>');var t,n,o,s,i,r,c,l,d,m,u,p,v,f,g,y,k,C,b=10,_=[],T=document.getElementById("picker-btn");function h(){_.forEach(function(e,a){var t;switch(e.checkState){case"1":t=L.marker([e.lat,e.lon],{draggable:!1,opacity:1,icon:L.divIcon({className:"green-marker",html:"<p>"+(a+1)+"</p>"})});break;case"2":t=L.marker([e.lat,e.lon],{draggable:!1,opacity:1,icon:L.divIcon({className:"blue-marker",html:"<p>"+(a+1)+"</p>"})});break;case"3":t=L.marker([e.lat,e.lon],{draggable:!1,opacity:1,icon:L.divIcon({className:"red-marker",html:"<p>"+(a+1)+"</p>"})})}o.addLayer(t),t.on("click",function(e){$(".detail_info").hasClass("active")&&$(".detail_info").removeClass("active"),i=parseInt(e.originalEvent.target.textContent)-1,function(e){var a=encodeURI("http://dh.ditu.zj.cn:18005/inverse/getInverseGeocoding.jsonp?&detail=1&zoom=11&latlon="+e.lon+","+e.lat+"&lat=&lon=&customer=2");$.ajax({url:a,dataType:"jsonp",success:function(a){var t=a.city.value+a.dist.value+a.town.value+a.poi;$(".legalEntity_name").text(e.legalEntityName),$(".legalRep_name").text(e.legalRep),$(".legalRep_tel").text(e.tel),$(".address_info").text(t),$(".distance_info").text((parseInt(e.distance)/1e3).toFixed(2)),$(".call_tel").data("tel",e.tel),s={longitude:e.lon,latitude:e.lat,name:a.poi,address:a.poi},$(".detail_info").addClass("active")},error:function(e){dd.alert({content:"地址解析出错"})}})}(_[i])})})}dd.postMessage({type:"init"}),dd.onMessage=function(e){t={lon:e.lon,lat:e.lat}||{lon:120.14989,lat:30.27751},e.cityName||"杭州市",_=e.markDatas,r=e.filterDatas,function(e){if(e)return void function(){n=L.map("map",{crs:L.CRS.CustomEPSG4326,center:t,minZoom:5,zoom:b,inertiaDeceleration:15e3,zoomControl:!1});var e=new L.GXYZ("http://ditu.zjzwfw.gov.cn/mapserver/vmap/zjvmap/getMAP?x={x}&y={y}&l={z}&styleId=tdt_biaozhunyangshi_2017",{tileSize:512,minZoom:5});n.addLayer(e);var a=new L.GXYZ("http://ditu.zjzwfw.gov.cn/mapserver/label/zjvmap/getImg?x={x}&y={y}&l={z}&styleId=tdt_biaozhunyangshi_2017",{tileSize:512,hitDetection:!0,keepBuffer:0,updateWhenZooming:!1});n.addLayer(a),o=L.markerClusterGroup(),h(),n.addLayer(o),function(){var e="",a="",t="",n="";$.each(r.marketType,function(a,t){e+='<dd data-paramCode="'+t.paramCode+'" data-paramCodeType="'+t.paramCodeType+'">'+t.paramName+"</dd>"}),$.each(r.checkType,function(e,t){a+='<dd data-paramCode="'+t.paramCode+'" data-paramCodeType="'+t.paramCodeType+'">'+t.paramName+"</dd>"}),$.each(r.taskStatus,function(e,a){t+='<dd data-paramCode="'+a.paramCode+'" data-paramCodeType="'+a.paramCodeType+'">'+a.paramName+"</dd>"}),$.each(r.superviseTag,function(e,a){n+='<dd data-paramCode="'+a.paramCode+'" data-paramCodeType="'+a.paramCodeType+'">'+a.paramName+"</dd>"}),$("#MARKET_TYPE").html(e),$("#TASK_TYPE").html(a),$("#TASK_STATUS").html(t),$("#SUPERVISE_TAG").html(n),$(".filter_list").on("click","dd",function(e){$(this).siblings().removeClass("active"),$(this).addClass("active");var a=$(e.target)[0].dataset.paramcodetype;switch(a){case"MARKET_TYPE":m=$(e.target)[0].dataset.paramcode;break;case"TASK_TYPE":p=$(e.target)[0].dataset.paramcode;break;case"TASK_STATUS":l=$(e.target)[0].dataset.paramcode;break;case"SUPERVISE_TAG":f=$(e.target)[0].dataset.paramcode}})}(),c={},$.each(r.SlicenoLDNameJson,function(e,a){var t=a.addressName;c[t]=[],a.codeAddress&&$.each(a.codeAddress,function(e,a){c[t].push(a.addressName)})}),n.on("click",function(e){$(".detail_info").hasClass("active")&&$(".detail_info").removeClass("active")})}();o.clearLayers(),n.setView([Number(t.lat),Number(t.lon)],b),h()}(e.init)},$(".filterBtn").on("click",function(){$(".custom-mask").addClass("custom-mask--visible"),$(".custom-container").addClass("custom-container--visible"),$(".custom-container li").addClass("active")}),$(".custom-mask").on("click",function(){$(".custom-mask").removeClass("custom-mask--visible"),$(".floating_box").hasClass("active")?($(".floating_box").removeClass("active"),$(".filter_list_box").removeClass("active")):($(".custom-container").removeClass("custom-container--visible"),$(".custom-container li").removeClass("active"))}),$(".custom-container").on("click",function(e){$(".custom-mask").removeClass("custom-mask--visible"),$(".custom-container").removeClass("custom-container--visible"),$(".custom-container li").removeClass("active");var a=$(e.target).data("metter");""==a?$(".filterBtn span").html('不限<i class="icon-arrow"></i>'):$(".filterBtn span").html(a+'<i class="icon-arrow"></i>'),dd.postMessage({type:"distance",val:a})}),$(".floating_box").on("click",function(e){if($(this).addClass("active"),$(".custom-mask").addClass("custom-mask--visible"),$(".filter_list_box").addClass("active"),d){$("#TASK_STATUS dd").removeClass("active");var a=jQuery.makeArray($("#TASK_STATUS dd"));$.each(a,function(e,a){if(a.dataset.paramcode==l)return $(a).addClass("active"),!0})}else $("#TASK_STATUS dd").removeClass("active");if(C?($("#picker-btn").text(y.join("-")),$("#picker-btn").addClass("active")):($("#picker-btn").text("管辖单位|片区"),$("#picker-btn").removeClass("active")),u){$("#MARKET_TYPE dd").removeClass("active");a=jQuery.makeArray($("#MARKET_TYPE dd"));$.each(a,function(e,a){if(a.dataset.paramcode==m)return $(a).addClass("active"),!0})}else $("#MARKET_TYPE dd").removeClass("active");if(v){$("#TASK_TYPE dd").removeClass("active");a=jQuery.makeArray($("#TASK_TYPE dd"));$.each(a,function(e,a){if(a.dataset.paramcode==p)return $(a).addClass("active"),!0})}else $("#TASK_TYPE dd").removeClass("active");if(g){$("#SUPERVISE_TAG dd").removeClass("active");a=jQuery.makeArray($("#SUPERVISE_TAG dd"));$.each(a,function(e,a){if(a.dataset.paramcode==f)return $(a).addClass("active"),!0})}else $("#SUPERVISE_TAG dd").removeClass("active")}),$(".custom-mask").on("touchmove",function(e){e.preventDefault()}),$(".custom-container").on("touchmove",function(e){e.preventDefault()}),$(".iptSearch").on("keydown",function(e){if(13==e.keyCode){e.target.value;e.target.value?dd.postMessage({type:"keyword",val:e.target.value}):dd.alert({content:"请输入查询关键字"})}}),$(".btn_handler_box").on("click",function(e){var a=$(e.target).data("filter");""!=a&&"1"!=a&&"2"!=a&&"3"!=a?"reset"!=a||n.setView([Number(t.lat),Number(t.lon)],b):dd.postMessage({type:"checkState",val:a})}),$(".call_tel").on("click",function(){var e=$(".call_tel").data("tel");dd.postMessage({type:"callPhone",val:e})}),$(".menu_icon_3").on("click",function(){dd.postMessage({type:"openMap",val:s})}),$(".detail").on("click",function(){dd.postMessage({type:"detail",val:i})}),$(".gocheck").on("click",function(){dd.postMessage({type:"gocheck",val:i})}),$(".unfind").on("click",function(){dd.postMessage({type:"unfind",val:i})}),$(".reset_btn").on("click",function(){y=[],k=[],T.innerText="管辖单位|片区",$(".filter_type dd").removeClass("active"),$(".custom-mask").removeClass("custom-mask--visible"),$(".floating_box").removeClass("active"),$(".filter_list_box").removeClass("active"),d="",u="",v="",g="";dd.postMessage({type:"businessDistrict",val:{taskStatus:"",businessDistrict:"",legalEntityCata:"",checkType:"",legalEntityTag:""}})}),$(".confirm_btn").on("click",function(){C=k?k.join(","):"";var e={taskStatus:d=l||"",businessDistrict:C,legalEntityCata:u=m||"",checkType:v=p||"",legalEntityTag:g=f||""};$(".custom-mask").removeClass("custom-mask--visible"),$(".floating_box").removeClass("active"),$(".filter_list_box").removeClass("active"),dd.postMessage({type:"businessDistrict",val:e})}),T.onclick=function(){new PickerView({bindElem:T,data:c,title:"片区/商圈",leftText:"取消",rightText:"确定",rightFn:function(e){var a;y=[],k=[];var t=r.SlicenoLDNameJson.findIndex(function(a){return a.addressName==e[0]});if(k.push(r.SlicenoLDNameJson[t].code),e[1]){y=e;var n=(a=r.SlicenoLDNameJson[t].codeAddress).findIndex(function(a){return a.addressName==e[1]});k.push(a[n].code)}else y.push(e[0]);T.innerText=y.join("-"),T.setAttribute("class","active")}})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY2hlY2ttYXAuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJkb2N1bWVudCIsIndyaXRlbG4iLCJpbml0TGF0bG5nIiwibWFwIiwibWFya2VycyIsIm1hcFBhcmFtcyIsImlkeCIsImZpbHRlckRhdGFzIiwicGlja2VyT3B0IiwidGFza1N0YXR1cyIsImN1clRhc2tTdGF0dXMiLCJsZWdhbEVudGl0eUNhdGEiLCJjdXJMZWdhbEVudGl0eUNhdGEiLCJjaGVja1R5cGUiLCJjdXJDaGVja1R5cGUiLCJsZWdhbEVudGl0eVRhZyIsImN1ckxlZ2FsRW50aXR5VGFnIiwiYXJlYU5hbWUiLCJhcmVhQ29kZSIsImN1cnJlbnRBcmVhQ29kZSIsImluaXRab29tIiwibWFya0RhdGFzIiwiYnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJkcmF3TWFyZWtlcnMiLCJmb3JFYWNoIiwidmFsIiwiaW5kZXgiLCJtYXJrZXIiLCJjaGVja1N0YXRlIiwiTCIsImxhdCIsImxvbiIsImRyYWdnYWJsZSIsIm9wYWNpdHkiLCJpY29uIiwiZGl2SWNvbiIsImNsYXNzTmFtZSIsImh0bWwiLCJhZGRMYXllciIsIm9uIiwiZSIsIiQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFyc2VJbnQiLCJvcmlnaW5hbEV2ZW50IiwidGFyZ2V0IiwidGV4dENvbnRlbnQiLCJyZXZlcnNlUmVzb2x1dGlvblVybCIsImVuY29kZVVSSSIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXMiLCJsb2NhdGlvbiIsImNpdHkiLCJkaXN0IiwidG93biIsInBvaSIsInRleHQiLCJsZWdhbEVudGl0eU5hbWUiLCJsZWdhbFJlcCIsInRlbCIsImRpc3RhbmNlIiwidG9GaXhlZCIsImRhdGEiLCJsb25naXR1ZGUiLCJsYXRpdHVkZSIsImFkZHJlc3MiLCJhZGRDbGFzcyIsImVycm9yIiwiZXJyIiwiZGQiLCJhbGVydCIsImNvbnRlbnQiLCJnZXRBZHJlc3NJbmZvIiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwib25NZXNzYWdlIiwiY2l0eU5hbWUiLCJjcnMiLCJDUlMiLCJDdXN0b21FUFNHNDMyNiIsImNlbnRlciIsIm1pblpvb20iLCJ6b29tIiwiaW5lcnRpYURlY2VsZXJhdGlvbiIsInpvb21Db250cm9sIiwibGF5ZXIiLCJHWFlaIiwidGlsZVNpemUiLCJsYWJlbExheWVyIiwiaGl0RGV0ZWN0aW9uIiwia2VlcEJ1ZmZlciIsInVwZGF0ZVdoZW5ab29taW5nIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwibWFya2V0SHRtbCIsInR5cGVIdG1sIiwic3RhdHVzSHRtbCIsInRhZ0h0bWwiLCJlYWNoIiwibWFya2V0VHlwZSIsInBhcmFtQ29kZSIsInBhcmFtQ29kZVR5cGUiLCJwYXJhbU5hbWUiLCJzdXBlcnZpc2VUYWciLCJldiIsInRoaXMiLCJzaWJsaW5ncyIsImRhdGFzZXQiLCJwYXJhbWNvZGV0eXBlIiwicGFyYW1jb2RlIiwiaW5pdEZpbHRlckh0bWwiLCJTbGljZW5vTEROYW1lSnNvbiIsImlkeEtleSIsImFkZHJlc3NOYW1lIiwiY29kZUFkZHJlc3MiLCJwdXNoIiwiaW5pdCIsImNsZWFyTGF5ZXJzIiwic2V0VmlldyIsIk51bWJlciIsImRyYXdNYXAiLCJtZXR0ZXIiLCJhcnIiLCJqUXVlcnkiLCJtYWtlQXJyYXkiLCJqb2luIiwicHJldmVudERlZmF1bHQiLCJrZXlDb2RlIiwiZmlsdGVyIiwicGhvbmVOdW0iLCJpbm5lclRleHQiLCJidXNpbmVzc0Rpc3RyaWN0IiwicHJlRmlsdGVyRGF0YSIsIm9uY2xpY2siLCJQaWNrZXJWaWV3IiwiYmluZEVsZW0iLCJ0aXRsZSIsImxlZnRUZXh0IiwicmlnaHRUZXh0IiwicmlnaHRGbiIsInNlbGVjdEFyciIsInN1YlNsaWNlbm9MRE5hbWVKc29uIiwiZmlyc3RJZHgiLCJmaW5kSW5kZXgiLCJvYmoiLCJjb2RlIiwic3ViSWR4Iiwic2V0QXR0cmlidXRlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFB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T0FBQUEsRUFBQTJGLGFBQUEyQixFQUFBLEtBQ2xGOUgsRUFBQXFHLEtBQUEwQixFQUFBSyxHQUFBRCxXQUVBcEksRUFBQXNHLEtBQUF5QixFQUFBLElBRUExSCxFQUFBZ0gsVUFBQXJILEVBQUFnSCxLQUFBLEtBQ0EzRyxFQUFBaUksYUFBQSIsImZpbGUiOiJqcy9jaGVja21hcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiLi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdkaW5ndGFsaycpID4gLTEpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQud3JpdGVsbignPHNjcmlwdCBzcmM9XCJodHRwczovL2FwcHgvd2ViLXZpZXcubWluLmpzXCInICsgJz4nICsgJzwnICsgJy8nICsgJ3NjcmlwdD4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZGQuZ2V0RW52KGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgIC8vICAgICBpZiAoIXJlcy5taW5pcHJvZ3JhbSkge1xyXG4gICAgICAgIC8vICAgICAgICAgZGQuYWxlcnQoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGNvbnRlbnQ6SlNPTi5zdHJpbmdpZnkoJ+i/kOihjOWHuumUmScpXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIHZhciBpbml0TGF0bG5nLCBpbml0Wm9vbSA9IDEwLCBjaXR5TmFtZSwgbmV3Q2VudGVyRGF0YSwgIG1hcmtEYXRhcyA9IFtdLFxyXG4gICAgICAgIG1hcCwgbWFya2VycywgbWFwUGFyYW1zLCBpZHgsIGZpbHRlckRhdGFzLCBwaWNrZXJPcHQ7XHJcbiAgICAgICAgdmFyIHRhc2tTdGF0dXMsIGN1clRhc2tTdGF0dXMsIGxlZ2FsRW50aXR5Q2F0YSwgY3VyTGVnYWxFbnRpdHlDYXRhLCBjaGVja1R5cGUsIGN1ckNoZWNrVHlwZSwgbGVnYWxFbnRpdHlUYWcsIGN1ckxlZ2FsRW50aXR5VGFnLCBhcmVhTmFtZSwgYXJlYUNvZGUsIGN1cnJlbnRBcmVhQ29kZTsgXHJcbiAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlja2VyLWJ0blwiKTtcclxuICAgICAgICBkZC5wb3N0TWVzc2FnZSh7dHlwZTogJ2luaXQnfSk7XHJcbiAgICAgICAgZGQub25NZXNzYWdlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpbml0TGF0bG5nID0ge2xvbjogZS5sb24sIGxhdDogZS5sYXR9IHx8IHtsb246IDEyMC4xNDk4OSwgbGF0OiAzMC4yNzc1MX07ICAvLyDpu5jorqTnu4/nuqzluqbkuLrok53lpKnllYbliqHkuK3lv4NcclxuICAgICAgICAgICAgY2l0eU5hbWUgPSBlLmNpdHlOYW1lIHx8IFwi5p2t5bee5biCXCI7XHJcbiAgICAgICAgICAgIG1hcmtEYXRhcyA9IGUubWFya0RhdGFzO1xyXG4gICAgICAgICAgICBmaWx0ZXJEYXRhcyA9IGUuZmlsdGVyRGF0YXM7XHJcbiAgICAgICAgICAgIGRyYXdNYXAoZS5pbml0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZHJhd01hcChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZHVjdGlvbk1hcCgpXHJcbiAgICAgICAgICAgIGRyYXdNYXJla2VycygpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICAgICBtYXAgPSBMLm1hcCgnbWFwJyx7Y3JzOkwuQ1JTLkN1c3RvbUVQU0c0MzI2LGNlbnRlcjogaW5pdExhdGxuZywgbWluWm9vbTogNSwgem9vbTogaW5pdFpvb20sIGluZXJ0aWFEZWNlbGVyYXRpb246MTUwMDAsIHpvb21Db250cm9sOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICB2YXIgdGlsZUFkZHJlc3MgPSAnaHR0cDovL2RpdHUuemp6d2Z3Lmdvdi5jbi9tYXBzZXJ2ZXIvdm1hcC96anZtYXAvZ2V0TUFQP3g9e3h9Jnk9e3l9Jmw9e3p9JnN0eWxlSWQ9dGR0X2JpYW96aHVueWFuZ3NoaV8yMDE3JztcclxuXHJcbiAgICAgICAgICAgIHZhciBsYXllciA9IG5ldyBMLkdYWVoodGlsZUFkZHJlc3MsIHt0aWxlU2l6ZTo1MTIsIG1pblpvb206IDV9KTtcclxuICAgICAgICAgICAgbWFwLmFkZExheWVyKGxheWVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOazqOiusOWbvuWxglxyXG4gICAgICAgICAgICAvLyB2YXIgbGFiZWxMYXllciA9IG5ldyBMLkdXVlRBbm5vKHt0aWxlU2l6ZTo1MTJ9KTtcclxuICAgICAgICAgICAgLy8gdmFyIGRhdGFTb3VyY2UgPSBuZXcgQ3VzdG9tLlVSTERhdGFTb3VyY2UoKTtcclxuICAgICAgICAgICAgLy8gZGF0YVNvdXJjZS51cmwgPSAnaHR0cDovL2RpdHUuemp6d2Z3Lmdvdi5jbi9tYXBzZXJ2ZXIvbGFiZWwvemp2bWFwL2dldERhdGFzP3g9JHt4fSZ5PSR7eX0mbD0ke3p9JnN0eWxlSWQ9dGR0X2JpYW96aHVueWFuZ3NoaV8yMDE3JztcclxuICAgICAgICAgICAgLy8gbGFiZWxMYXllci5hZGREYXRhU291cmNlKGRhdGFTb3VyY2UpO1xyXG4gICAgICAgICAgICAvLyBtYXAuYWRkTGF5ZXIobGFiZWxMYXllcik7XHJcbiAgICAgICAgICAgIHZhciBsYWJlbExheWVyID0gbmV3IEwuR1hZWignaHR0cDovL2RpdHUuemp6d2Z3Lmdvdi5jbi9tYXBzZXJ2ZXIvbGFiZWwvemp2bWFwL2dldEltZz94PXt4fSZ5PXt5fSZsPXt6fSZzdHlsZUlkPXRkdF9iaWFvemh1bnlhbmdzaGlfMjAxNycse3RpbGVTaXplOjUxMixoaXREZXRlY3Rpb246dHJ1ZSxrZWVwQnVmZmVyOjAsdXBkYXRlV2hlblpvb21pbmc6ZmFsc2V9KTtcclxuICAgICAgICAgICAgbWFwLmFkZExheWVyKGxhYmVsTGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgbWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKCk7XHJcbiAgICAgICAgICAgIGRyYXdNYXJla2VycygpO1xyXG4gICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XHJcblxyXG4gICAgICAgICAgICBpbml0RmlsdGVySHRtbCgpO1xyXG4gICAgICAgICAgICBnZXRQaWNrZXJPcHQoKTsgXHJcblxyXG4gICAgICAgICAgICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmKCQoXCIuZGV0YWlsX2luZm9cIikuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIuZGV0YWlsX2luZm9cIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UGlja2VyT3B0KCkge1xyXG4gICAgICAgICAgICBwaWNrZXJPcHQgPSB7fTtcclxuICAgICAgICAgICAgJC5lYWNoKGZpbHRlckRhdGFzLlNsaWNlbm9MRE5hbWVKc29uLCBmdW5jdGlvbiAoaW5kZXgsIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeEtleSA9IHZhbC5hZGRyZXNzTmFtZTtcclxuICAgICAgICAgICAgICAgIHBpY2tlck9wdFtpZHhLZXldID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsLmNvZGVBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHZhbC5jb2RlQWRkcmVzcywgZnVuY3Rpb24gKGlkeCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGlja2VyT3B0W2lkeEtleV0ucHVzaCh2YWx1ZS5hZGRyZXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRGaWx0ZXJIdG1sICgpIHtcclxuICAgICAgICAgICAgdmFyIG1hcmtldEh0bWwgPSAnJywgdHlwZUh0bWwgPSAnJywgc3RhdHVzSHRtbCA9ICcnLCB0YWdIdG1sID0gJyc7XHJcbiAgICAgICAgICAgICQuZWFjaChmaWx0ZXJEYXRhcy5tYXJrZXRUeXBlLCBmdW5jdGlvbiAoaW5kZXgsIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgbWFya2V0SHRtbCArPSAnPGRkIGRhdGEtcGFyYW1Db2RlPVwiJyArIHZhbC5wYXJhbUNvZGUgKyAnXCIgZGF0YS1wYXJhbUNvZGVUeXBlPVwiJyArIHZhbC5wYXJhbUNvZGVUeXBlICsgJ1wiPicgKyB2YWwucGFyYW1OYW1lICsgJzwvZGQ+JztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQuZWFjaChmaWx0ZXJEYXRhcy5jaGVja1R5cGUsIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlSHRtbCArPSAnPGRkIGRhdGEtcGFyYW1Db2RlPVwiJyArIHZhbC5wYXJhbUNvZGUgKyAnXCIgZGF0YS1wYXJhbUNvZGVUeXBlPVwiJyArIHZhbC5wYXJhbUNvZGVUeXBlICsgJ1wiPicgKyB2YWwucGFyYW1OYW1lICsgJzwvZGQ+JztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQuZWFjaChmaWx0ZXJEYXRhcy50YXNrU3RhdHVzLCBmdW5jdGlvbiAoaW5kZXgsIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzSHRtbCArPSAnPGRkIGRhdGEtcGFyYW1Db2RlPVwiJyArIHZhbC5wYXJhbUNvZGUgKyAnXCIgZGF0YS1wYXJhbUNvZGVUeXBlPVwiJyArIHZhbC5wYXJhbUNvZGVUeXBlICsgJ1wiPicgKyB2YWwucGFyYW1OYW1lICsgJzwvZGQ+JztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQuZWFjaChmaWx0ZXJEYXRhcy5zdXBlcnZpc2VUYWcsIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB0YWdIdG1sICs9ICc8ZGQgZGF0YS1wYXJhbUNvZGU9XCInICsgdmFsLnBhcmFtQ29kZSArICdcIiBkYXRhLXBhcmFtQ29kZVR5cGU9XCInICsgdmFsLnBhcmFtQ29kZVR5cGUgKyAnXCI+JyArIHZhbC5wYXJhbU5hbWUgKyAnPC9kZD4nO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnI01BUktFVF9UWVBFJykuaHRtbChtYXJrZXRIdG1sKTtcclxuICAgICAgICAgICAgJCgnI1RBU0tfVFlQRScpLmh0bWwodHlwZUh0bWwpO1xyXG4gICAgICAgICAgICAkKCcjVEFTS19TVEFUVVMnKS5odG1sKHN0YXR1c0h0bWwpO1xyXG4gICAgICAgICAgICAkKCcjU1VQRVJWSVNFX1RBRycpLmh0bWwodGFnSHRtbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkKFwiLmZpbHRlcl9saXN0XCIpLm9uKCdjbGljaycsICdkZCcsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9ICQoZXYudGFyZ2V0KVswXS5kYXRhc2V0LnBhcmFtY29kZXR5cGU7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2godHlwZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1BUktFVF9UWVBFXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2FsRW50aXR5Q2F0YSA9ICQoZXYudGFyZ2V0KVswXS5kYXRhc2V0LnBhcmFtY29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlRBU0tfVFlQRVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1R5cGUgPSAkKGV2LnRhcmdldClbMF0uZGF0YXNldC5wYXJhbWNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJUQVNLX1NUQVRVU1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdHVzID0gJChldi50YXJnZXQpWzBdLmRhdGFzZXQucGFyYW1jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU1VQRVJWSVNFX1RBR1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdhbEVudGl0eVRhZyA9ICQoZXYudGFyZ2V0KVswXS5kYXRhc2V0LnBhcmFtY29kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLmZpbHRlckJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLmN1c3RvbS1tYXNrJykuYWRkQ2xhc3MoJ2N1c3RvbS1tYXNrLS12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICQoJy5jdXN0b20tY29udGFpbmVyJykuYWRkQ2xhc3MoJ2N1c3RvbS1jb250YWluZXItLXZpc2libGUnKTtcclxuICAgICAgICAgICAgJCgnLmN1c3RvbS1jb250YWluZXIgbGknKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5jdXN0b20tbWFzaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCgnLmN1c3RvbS1tYXNrJykucmVtb3ZlQ2xhc3MoJ2N1c3RvbS1tYXNrLS12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmZsb2F0aW5nX2JveFwiKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICQoXCIuZmxvYXRpbmdfYm94XCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoJy5maWx0ZXJfbGlzdF9ib3gnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdjdXN0b20tY29udGFpbmVyLS12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcuY3VzdG9tLWNvbnRhaW5lciBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuY3VzdG9tLWNvbnRhaW5lcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAkKCcuY3VzdG9tLW1hc2snKS5yZW1vdmVDbGFzcygnY3VzdG9tLW1hc2stLXZpc2libGUnKTtcclxuICAgICAgICAgICAgJCgnLmN1c3RvbS1jb250YWluZXInKS5yZW1vdmVDbGFzcygnY3VzdG9tLWNvbnRhaW5lci0tdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAkKCcuY3VzdG9tLWNvbnRhaW5lciBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdmFyIG1ldHRlciA9ICQoZXYudGFyZ2V0KS5kYXRhKCdtZXR0ZXInKTtcclxuICAgICAgICAgICAgaWYgKG1ldHRlciA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZmlsdGVyQnRuIHNwYW4nKS5odG1sKCfkuI3pmZAnICsgJzxpIGNsYXNzPVwiaWNvbi1hcnJvd1wiPjwvaT4nKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnLmZpbHRlckJ0biBzcGFuJykuaHRtbChtZXR0ZXIgKyAnPGkgY2xhc3M9XCJpY29uLWFycm93XCI+PC9pPicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGQucG9zdE1lc3NhZ2Uoe3R5cGU6ICdkaXN0YW5jZScsIHZhbDogbWV0dGVyfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIuZmxvYXRpbmdfYm94XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoJy5jdXN0b20tbWFzaycpLmFkZENsYXNzKCdjdXN0b20tbWFzay0tdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAkKCcuZmlsdGVyX2xpc3RfYm94JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoY3VyVGFza1N0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgJCgnI1RBU0tfU1RBVFVTIGRkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IGpRdWVyeS5tYWtlQXJyYXkoJCgnI1RBU0tfU1RBVFVTIGRkJykpO1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGFyciwgZnVuY3Rpb24gKGluZGV4LCB2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmRhdGFzZXQucGFyYW1jb2RlID09IHRhc2tTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh2YWwpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI1RBU0tfU1RBVFVTIGRkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50QXJlYUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwaWNrZXItYnRuJykudGV4dChhcmVhTmFtZS5qb2luKCctJykpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3BpY2tlci1idG4nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGlja2VyLWJ0bicpLnRleHQoJ+euoei+luWNleS9jXzniYfljLonKTtcclxuICAgICAgICAgICAgICAgICQoJyNwaWNrZXItYnRuJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJMZWdhbEVudGl0eUNhdGEpIHtcclxuICAgICAgICAgICAgICAgICQoJyNNQVJLRVRfVFlQRSBkZCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBqUXVlcnkubWFrZUFycmF5KCQoJyNNQVJLRVRfVFlQRSBkZCcpKTtcclxuICAgICAgICAgICAgICAgICQuZWFjaChhcnIsIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5kYXRhc2V0LnBhcmFtY29kZSA9PSBsZWdhbEVudGl0eUNhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh2YWwpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI01BUktFVF9UWVBFIGRkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJDaGVja1R5cGUpIHtcclxuICAgICAgICAgICAgICAgICQoJyNUQVNLX1RZUEUgZGQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0galF1ZXJ5Lm1ha2VBcnJheSgkKCcjVEFTS19UWVBFIGRkJykpO1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGFyciwgZnVuY3Rpb24gKGluZGV4LCB2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmRhdGFzZXQucGFyYW1jb2RlID09IGNoZWNrVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHZhbCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjVEFTS19UWVBFIGRkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJMZWdhbEVudGl0eVRhZykge1xyXG4gICAgICAgICAgICAgICAgJCgnI1NVUEVSVklTRV9UQUcgZGQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0galF1ZXJ5Lm1ha2VBcnJheSgkKCcjU1VQRVJWSVNFX1RBRyBkZCcpKTtcclxuICAgICAgICAgICAgICAgICQuZWFjaChhcnIsIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5kYXRhc2V0LnBhcmFtY29kZSA9PSBsZWdhbEVudGl0eVRhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHZhbCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjU1VQRVJWSVNFX1RBRyBkZCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuY3VzdG9tLW1hc2snKS5vbigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5jdXN0b20tY29udGFpbmVyJykub24oJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAkKCcuaXB0U2VhcmNoJykub24oJ2tleWRvd24nLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PSAxMyl7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5V29yZCA9IGNpdHlOYW1lICsgZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZC5wb3N0TWVzc2FnZSh7dHlwZTogJ2tleXdvcmQnLCB2YWw6IGUudGFyZ2V0LnZhbHVlfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRkLmFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCLor7fovpPlhaXmn6Xor6LlhbPplK7lrZdcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5idG5faGFuZGxlcl9ib3gnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9ICQoZXYudGFyZ2V0KS5kYXRhKCdmaWx0ZXInKTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlciA9PSBcIlwiIHx8IGZpbHRlciA9PSBcIjFcIiB8fCBmaWx0ZXIgPT0gXCIyXCIgfHwgZmlsdGVyID09IFwiM1wiKSB7XHJcbiAgICAgICAgICAgICAgICBkZC5wb3N0TWVzc2FnZSh7dHlwZTogJ2NoZWNrU3RhdGUnLCB2YWw6IGZpbHRlcn0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZpbHRlciA9PSBcInJlc2V0XCIpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXRWaWV3KFtOdW1iZXIoaW5pdExhdGxuZy5sYXQpLCBOdW1iZXIoaW5pdExhdGxuZy5sb24pXSwgaW5pdFpvb20pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiLmNhbGxfdGVsXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGhvbmVOdW0gPSAkKFwiLmNhbGxfdGVsXCIpLmRhdGEoXCJ0ZWxcIik7XHJcbiAgICAgICAgICAgIGRkLnBvc3RNZXNzYWdlKHt0eXBlOiAnY2FsbFBob25lJywgdmFsOiBwaG9uZU51bX0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiLm1lbnVfaWNvbl8zXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZC5wb3N0TWVzc2FnZSh7dHlwZTogJ29wZW5NYXAnLCB2YWw6IG1hcFBhcmFtc30pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiLmRldGFpbFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGQucG9zdE1lc3NhZ2Uoe3R5cGU6ICdkZXRhaWwnLCB2YWw6IGlkeH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiLmdvY2hlY2tcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRkLnBvc3RNZXNzYWdlKHt0eXBlOiAnZ29jaGVjaycsIHZhbDogaWR4fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIudW5maW5kXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBkZC5wb3N0TWVzc2FnZSh7dHlwZTogJ3VuZmluZCcsIHZhbDogaWR4fSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIucmVzZXRfYnRuXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhcmVhTmFtZSA9IFtdO1xyXG4gICAgICAgICAgICBhcmVhQ29kZSA9IFtdO1xyXG4gICAgICAgICAgICBidG4uaW5uZXJUZXh0ID0gJ+euoei+luWNleS9jXzniYfljLonO1xyXG4gICAgICAgICAgICAkKFwiLmZpbHRlcl90eXBlIGRkXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLmN1c3RvbS1tYXNrJykucmVtb3ZlQ2xhc3MoJ2N1c3RvbS1tYXNrLS12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICQoXCIuZmxvYXRpbmdfYm94XCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLmZpbHRlcl9saXN0X2JveCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgY3VyVGFza1N0YXR1cyA9ICcnXHJcbiAgICAgICAgICAgIGN1ckxlZ2FsRW50aXR5Q2F0YSA9ICcnXHJcbiAgICAgICAgICAgIGN1ckNoZWNrVHlwZSA9ICcnXHJcbiAgICAgICAgICAgIGN1ckxlZ2FsRW50aXR5VGFnID0gJydcclxuICAgICAgICAgICAgdmFyIHByZUZpbHRlckRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB0YXNrU3RhdHVzOiAnJyxcclxuICAgICAgICAgICAgICAgIGJ1c2luZXNzRGlzdHJpY3Q6ICcnLCAvL+eJh+WMulxyXG4gICAgICAgICAgICAgICAgbGVnYWxFbnRpdHlDYXRhOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoZWNrVHlwZTogJycsXHJcbiAgICAgICAgICAgICAgICBsZWdhbEVudGl0eVRhZzogJydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZC5wb3N0TWVzc2FnZSh7dHlwZTogJ2J1c2luZXNzRGlzdHJpY3QnLCB2YWw6IHByZUZpbHRlckRhdGF9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIi5jb25maXJtX2J0blwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGFyZWFDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50QXJlYUNvZGUgPSBhcmVhQ29kZS5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50QXJlYUNvZGUgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJUYXNrU3RhdHVzID0gdGFza1N0YXR1cyB8fCAnJ1xyXG4gICAgICAgICAgICBjdXJMZWdhbEVudGl0eUNhdGEgPSBsZWdhbEVudGl0eUNhdGEgfHwgJydcclxuICAgICAgICAgICAgY3VyQ2hlY2tUeXBlID0gY2hlY2tUeXBlIHx8ICcnXHJcbiAgICAgICAgICAgIGN1ckxlZ2FsRW50aXR5VGFnID0gbGVnYWxFbnRpdHlUYWcgfHwgJydcclxuICAgICAgICAgICAgdmFyIHByZUZpbHRlckRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXR1czogY3VyVGFza1N0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0Rpc3RyaWN0OiBjdXJyZW50QXJlYUNvZGUsIC8v54mH5Yy6XHJcbiAgICAgICAgICAgICAgICAgICAgbGVnYWxFbnRpdHlDYXRhOiBjdXJMZWdhbEVudGl0eUNhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tUeXBlOiBjdXJDaGVja1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVnYWxFbnRpdHlUYWc6IGN1ckxlZ2FsRW50aXR5VGFnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmN1c3RvbS1tYXNrJykucmVtb3ZlQ2xhc3MoJ2N1c3RvbS1tYXNrLS12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICQoXCIuZmxvYXRpbmdfYm94XCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLmZpbHRlcl9saXN0X2JveCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgZGQucG9zdE1lc3NhZ2Uoe3R5cGU6ICdidXNpbmVzc0Rpc3RyaWN0JywgdmFsOiBwcmVGaWx0ZXJEYXRhfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gZGF0YSA9IHtcIuWwj+aYjuWutlwiOltdLCBcIuWwj+e6ouWutlwiOltcIuWwj+e6oueIuOeIuFwiLCBcIuWwj+e6ouWmiOWmiFwiXX1cclxuICAgICAgICAgICAgdmFyIHBpY2tlclZpZXcgPSBuZXcgUGlja2VyVmlldyh7XHJcbiAgICAgICAgICAgICAgICBiaW5kRWxlbTogYnRuLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogcGlja2VyT3B0LFxyXG4gICAgICAgICAgICAgICAgLy8gZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn54mH5Yy6L+WVhuWciCcsXHJcbiAgICAgICAgICAgICAgICBsZWZ0VGV4dDogJ+WPlua2iCcsXHJcbiAgICAgICAgICAgICAgICByaWdodFRleHQ6ICfnoa7lrponLFxyXG4gICAgICAgICAgICAgICAgcmlnaHRGbjogZnVuY3Rpb24oIHNlbGVjdEFyciApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBpbmRleEFycnkgPSBidG4uZ2V0QXR0cmlidXRlKFwic2VsZWN0Y2FjaGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJlYU5hbWUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBhcmVhQ29kZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJTbGljZW5vTEROYW1lSnNvbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RJZHggPSBmaWx0ZXJEYXRhcy5TbGljZW5vTEROYW1lSnNvbi5maW5kSW5kZXgoZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqLmFkZHJlc3NOYW1lID09IHNlbGVjdEFyclswXX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZWFDb2RlLnB1c2goZmlsdGVyRGF0YXMuU2xpY2Vub0xETmFtZUpzb25bZmlyc3RJZHhdLmNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RBcnJbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYU5hbWUgPSBzZWxlY3RBcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNsaWNlbm9MRE5hbWVKc29uID0gZmlsdGVyRGF0YXMuU2xpY2Vub0xETmFtZUpzb25bZmlyc3RJZHhdLmNvZGVBZGRyZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViSWR4ID0gc3ViU2xpY2Vub0xETmFtZUpzb24uZmluZEluZGV4KGZ1bmN0aW9uKHZhbCl7cmV0dXJuIHZhbC5hZGRyZXNzTmFtZSA9PSBzZWxlY3RBcnJbMV19KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYUNvZGUucHVzaChzdWJTbGljZW5vTEROYW1lSnNvbltzdWJJZHhdLmNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFOYW1lLnB1c2goc2VsZWN0QXJyWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLmlubmVyVGV4dCA9IGFyZWFOYW1lLmpvaW4oJy0nKTtcclxuICAgICAgICAgICAgICAgICAgICBidG4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdNYXJla2VycygpIHtcclxuICAgICAgICAgICAgbWFya0RhdGFzLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcmVTdGF0ZSA9IHZhbC5jaGVja1N0YXRlLCBtYXJrZXIsIGN1c3RvbUljb247XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJlU3RhdGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IEwubWFya2VyKFt2YWwubGF0LCB2YWwubG9uXSwge2RyYWdnYWJsZTogZmFsc2UsIG9wYWNpdHk6IDEsIGljb246IEwuZGl2SWNvbih7Y2xhc3NOYW1lOiAnZ3JlZW4tbWFya2VyJywgaHRtbDogJzxwPicgKyAoaW5kZXggKyAxKSArICc8L3A+J30pfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IEwubWFya2VyKFt2YWwubGF0LCB2YWwubG9uXSwge2RyYWdnYWJsZTogZmFsc2UsIG9wYWNpdHk6IDEsIGljb246IEwuZGl2SWNvbih7Y2xhc3NOYW1lOiAnYmx1ZS1tYXJrZXInLCBodG1sOiAnPHA+JyArIChpbmRleCArIDEpICsgJzwvcD4nfSl9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyID0gTC5tYXJrZXIoW3ZhbC5sYXQsIHZhbC5sb25dLCB7ZHJhZ2dhYmxlOiBmYWxzZSwgb3BhY2l0eTogMSwgaWNvbjogTC5kaXZJY29uKHtjbGFzc05hbWU6ICdyZWQtbWFya2VyJywgaHRtbDogJzxwPicgKyAoaW5kZXggKyAxKSArICc8L3A+J30pfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJChcIi5kZXRhaWxfaW5mb1wiKS5oYXNDbGFzcygnYWN0aXZlJykpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZGV0YWlsX2luZm9cIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZHggPSBwYXJzZUludChlLm9yaWdpbmFsRXZlbnQudGFyZ2V0LnRleHRDb250ZW50KSAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0QWRyZXNzSW5mbyhtYXJrRGF0YXNbaWR4XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWR1Y3Rpb25NYXAoKSB7XHJcbiAgICAgICAgICAgIG1hcmtlcnMuY2xlYXJMYXllcnMoKTtcclxuICAgICAgICAgICAgbWFwLnNldFZpZXcoW051bWJlcihpbml0TGF0bG5nLmxhdCksIE51bWJlcihpbml0TGF0bG5nLmxvbildLCBpbml0Wm9vbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBZHJlc3NJbmZvIChlKSB7XHJcbiAgICAgICAgICAgIHZhciByZXZlcnNlUmVzb2x1dGlvblVybCA9IGVuY29kZVVSSShcImh0dHA6Ly9kaC5kaXR1LnpqLmNuOjE4MDA1L2ludmVyc2UvZ2V0SW52ZXJzZUdlb2NvZGluZy5qc29ucD8mZGV0YWlsPTEmem9vbT0xMSZsYXRsb249XCIgKyBlLmxvbiArIFwiLFwiICsgZS5sYXQgKyBcIiZsYXQ9Jmxvbj0mY3VzdG9tZXI9MlwiKTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogcmV2ZXJzZVJlc29sdXRpb25VcmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxyXG4gICAgICAgICAgICAgICAgLy8ganNvbnA6IFwiY2FsbGJhY2tcIixcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHJlcy5jaXR5LnZhbHVlICsgcmVzLmRpc3QudmFsdWUgKyByZXMudG93bi52YWx1ZSArIHJlcy5wb2k7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5sZWdhbEVudGl0eV9uYW1lXCIpLnRleHQoZS5sZWdhbEVudGl0eU5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5sZWdhbFJlcF9uYW1lXCIpLnRleHQoZS5sZWdhbFJlcClcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLmxlZ2FsUmVwX3RlbFwiKS50ZXh0KGUudGVsKVxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIuYWRkcmVzc19pbmZvXCIpLnRleHQobG9jYXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5kaXN0YW5jZV9pbmZvXCIpLnRleHQoKHBhcnNlSW50KGUuZGlzdGFuY2UpIC8gMTAwMCkudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jYWxsX3RlbFwiKS5kYXRhKFwidGVsXCIsIGUudGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXBQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogZS5sb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBlLmxhdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVzLnBvaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogcmVzLnBvaSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIuZGV0YWlsX2luZm9cIikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGQuYWxlcnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIuWcsOWdgOino+aekOWHuumUmVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0iXSwic291cmNlUm9vdCI6IiJ9